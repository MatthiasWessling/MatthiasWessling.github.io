{{ define "main" }}
<div class="container">
    <header class="section-header">
        <h1>{{ .Title }}</h1>
        {{ if .Content }}
        <div class="section-description">
            {{ .Content }}
        </div>
        {{ end }}
    </header>

    <div class="notebooks-controls">
        <div class="notebooks-search-wrap">
            <label for="notebooks-search" class="notebooks-control-label">Search</label>
            <input id="notebooks-search" type="search" placeholder="Search notebooks by title or summary" autocomplete="off">
        </div>
        <div class="notebooks-sort-wrap">
            <label for="notebooks-sort" class="notebooks-control-label">Sort</label>
            <select id="notebooks-sort">
                <option value="newest">Newest first</option>
                <option value="oldest">Oldest first</option>
                <option value="title-asc">Title A-Z</option>
                <option value="title-desc">Title Z-A</option>
            </select>
        </div>
    </div>

    <p id="notebooks-results-count" class="notebooks-results-count"></p>

    <div id="notebooks-list" class="news-list">
        {{ range .Pages.ByDate.Reverse }}
        <article
            class="news-item notebook-entry"
            data-title="{{ .Title | lower }}"
            data-summary="{{ .Params.summary | default "" | lower }}"
            data-date="{{ .Date.Unix }}"
        >
            <div class="notebook-entry-layout">
                {{ if .Params.image }}
                {{ $media := lower (.Params.image | default "") }}
                <div class="notebook-media">
                    {{ if or (strings.HasSuffix $media ".mp4") (strings.HasSuffix $media ".webm") (strings.HasSuffix $media ".ogg") }}
                    <video controls class="notebook-video">
                        <source src="{{ .Params.image }}">
                        Your browser does not support the video tag.
                    </video>
                    {{ else }}
                    <img src="{{ .Params.image }}" alt="{{ .Params.image_alt | default .Title }}" class="clickable-image">
                    {{ end }}
                </div>
                {{ end }}

                <div class="notebook-main">
                    <div class="news-meta">
                        <time class="news-date">{{ .Date.Format "January 2, 2006" }}</time>
                    </div>
                    <h2 class="news-title">{{ .Title }}</h2>
                    {{ if .Params.summary }}
                    <p class="news-summary">{{ .Params.summary }}</p>
                    {{ end }}
                    <div class="project-links">
                        {{ if .Params.notebooklm_url }}
                        <a href="{{ .Params.notebooklm_url }}" target="_blank" rel="noopener" class="read-more">Open in NotebookLM →</a>
                        {{ end }}
                        <a href="{{ .Permalink }}" class="read-more">Details →</a>
                    </div>
                </div>
            </div>
        </article>
        {{ else }}
        <p class="no-content">No notebook entries yet.</p>
        {{ end }}
    </div>
</div>
{{ end }}
